<!DOCTYPE html>
<html>
<head>

</head>
<body>

  <h1>RPS</h1>
    <div id="wrapper">
        <button id="rock">Rock</button>
        <button id="paper">Paper</button>
        <button id="scissors">Scissors</button>
    </div> 

    <div id="results"></div>
  <p></p>
  
    <script>
        //input rock, paper or scissors
        //computer inputs rock paper or scissors
        //algorithm determines if you've won or lost

        let rock = "rock";
        let paper = "paper";
        let scissors = "scissors";

        
        function getComputerChoice(){
        let computerChoice = Math.floor(Math.random()*3)+1;
        switch(computerChoice) {
            case 1:
                return rock;
                break;
            case 2:
                return paper;
                break;
            case 3:
                return scissors;
                break;
        }
    }

        function playRound(playerSelection, computerSelection){

            console.log("computer plays: " + computerSelection);
            if (playerSelection == rock && computerSelection == paper){
                console.log("computer wins round");
                return 0;
            } else if (playerSelection == rock && computerSelection == scissors){
                console.log("player wins round");
                return 1;
        } else if (playerSelection == paper && computerSelection == rock){
                console.log("player wins round");
                return 1;
        } else if (playerSelection == paper && computerSelection == scissors){
                console.log("computer wins round");
                return 0;
        } else if (playerSelection == scissors && computerSelection == rock){
                console.log("computer wins round");
                return 0;
        } else if (playerSelection == scissors && computerSelection == paper){
                console.log("player wins round");
                return 1;
        } else {
            return "no one wins round";
        }
    
        
    }
        //const playerSelection = prompt("Please choose rock, paper or scissors.").toLowerCase();
        //console.log(playerSelection);
        //const computerSelection = getComputerChoice();
        //console.log(playRound(playerSelection, computerSelection));


        function game(){

            let playerWins = 0;
            let computerWins = 0;
            let numberOfRounds = 0;
           
            let playerSelection;
            const wrapper = document.getElementById('wrapper');

            const results = document.getElementById('results');
            const score = document.createElement('p');
            const nbRounds = document.createElement('p');
            const winner = document.createElement('p');
            results.appendChild(nbRounds);
            results.appendChild(score);
            results.appendChild(winner);

            nbRounds.textContent = ("number of rounds: " + numberOfRounds);
            score.textContent = ("score: player " + playerWins + " - " + computerWins + " computer");
            


            wrapper.addEventListener('click', (event) =>{
                const isButton = event.target.nodeName === 'BUTTON';
                if(!isButton){
                    return;
                }

                winner.textContent = ("");

                playerSelection = event.target.id;
                const computerSelection = getComputerChoice();
                    let round = playRound(playerSelection, computerSelection);
                    switch(round) {
                        case 1:
                        numberOfRounds++;
                        playerWins++;
                        break;
                        case 0:
                        numberOfRounds++;
                        computerWins++
                        break;

                        default:
                        numberOfRounds++;
                    }

                    score.textContent = ("score: player " + playerWins + " - " + computerWins + " computer");
                    nbRounds.textContent = ("number of rounds: " + numberOfRounds);
                    console.log(round);

                    if(playerWins>=5){
                        winner.textContent = ("player wins the game");
                        playerWins=0;
                        computerWins=0;
                    }
                    if(computerWins>=5){
                        winner.textContent = ("computer wins the game");
                        playerWins=0;
                        computerWins=0;
                    }

            }
            
            )

        /*for (let i = 0; i<5; i++){
            let playerSelection = prompt("Please choose rock, paper or scissors.").toLowerCase();
            while (playerSelection != rock && playerSelection != paper && playerSelection != scissors){
                playerSelection = prompt("Please actually enter rock, paper or scissors.").toLowerCase();
                console.log(playerSelection);
            }
            console.log("This is round " + (i+1));
            const computerSelection = getComputerChoice();
            let round = playRound(playerSelection, computerSelection);
            switch(round) {
                case "player wins":
                    playerWins++;
                    break;
                case "computer wins":
                    computerWins++
                    break;
            }*/

            /*console.log(round);
            console.log(playerWins);
            console.log(computerWins);
        }

        if (playerWins>computerWins){
                console.log("The player wins with a score of " + playerWins + " to " + computerWins);
            } else if (computerWins>playerWins){
                console.log("The computer wins with a score of " + computerWins + " to " + playerWins);
            } else {
                console.log("It is a draw");
            }*/
    
        }

    game();
        

    </script>

</body>
</html>
